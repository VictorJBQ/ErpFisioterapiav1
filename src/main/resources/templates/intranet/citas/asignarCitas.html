<!DOCTYPE html>

<html lang="en" xmlns:th="http://wwww.thymeleaf.org">

<head>

<meta charset="UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.css" />

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/css/bootstrap.min.css">

<link
	href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
	rel="stylesheet" />

<link rel="stylesheet" th:href="@{/css/EstiloDash.css}" />

<link rel="stylesheet" th:href="@{/css/calendario.css}" />

<link rel="stylesheet" th:href="@{/assets2/css/EstilosBasico.css}" />

<link rel="shortcut icon" th:href="@{/images/perfilLog.png}">

<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" />

<link rel="stylesheet" th:href="@{/css/style.css}" />

<title>JimBus Solutions</title>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body>

	<!-- top navigation bar -->

	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">

		<div class="container-fluid">

			<button class="navbar-toggler" type="button"
				data-bs-toggle="offcanvas" data-bs-target="#sidebar"
				aria-controls="offcanvasExample">

				<span class="navbar-toggler-icon" data-bs-target="#sidebar"></span>

			</button>

			<a class="navbar-brand me-auto ms-lg-0 ms-3 text-uppercase fw-bold"
				href="#"><img th:src="@{/images/JBblanco.png}" width="100px"
				height="50px" />JimBus Solutions</a>

			<div class="ms-auto d-inline-block">

				<form th:action="@{/logout}" method="post">

					<button class="icon solid fa-right-to-bracket"
						style="border: none;"></button>

				</form>

			</div>

		</div>

	</nav>

	<!-- top navigation bar -->

	<!-- offcanvas -->

	<div class="offcanvas offcanvas-start sidebar-nav bg-dark"
		tabindex="-1" id="sidebar">

		<div class="offcanvas-body p-0">

			<nav class="navbar-dark m-3">

				<ul class="navbar-nav">

					<li class="nav-item "><a href="/intranet/inicio"
						class="nav-link btn-dark icon solid fa-user text-white hover-overlay">Inicio</a></li>

					<li class="nav-item dropdown text-white"><a
						class="nav-link dropdown-toggle btn-dark text-white icon solid fa-book"
						href="#" id="navbarDropdownAgenda" role="button"
						data-bs-toggle="dropdown" aria-expanded="false"> Agenda </a>

						<ul class="dropdown-menu" aria-labelledby="navbarDropdownAgenda">

							<li><a href="/intranet/citas/citas"
								class="dropdown-item icon solid fa-eye">Citas por revisar</a></li>

							<li><a href="/intranet/citas/asignarCitas"
								class="dropdown-item icon solid fa-pen">Calendarios</a></li>

							<li><a href="/intranet/citas/altaCitas"
								class="dropdown-item icon solid fa-plus">Añadir citas</a></li>

						</ul></li>

					<li class="nav-item dropdown"><a
						class="nav-link icon solid btn-dark fa-users dropdown-toggle text-white"
						href="#" id="navbarDropdownPaciente" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">Pacientes</a>

						<ul class="dropdown-menu" aria-labelledby="navbarDropdownPaciente">

							<li><a href="/intranet/pacientes/pacientes"
								class="dropdown-item icon solid fa-magnifying-glass">

									listado/buscador Cliente</a></li>

						</ul></li>

					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle btn-dark icon solid fa-user-doctor text-white"
						href="#" id="navbarDropdownEmpleados" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">Empleados</a>

						<ul class="dropdown-menu"
							aria-labelledby="navbarDropdownEmpleados">

							<li><a href="/intranet/empleados/altaEmpleados"
								class="dropdown-item icon solid fa-user-plus">Nuevo empleado</a></li>

						</ul></li>

					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle icon solid fa-coins btn-dark text-white"
						href="#" id="dropdownMenuClickableInside"
						data-bs-toggle="dropdown" aria-expanded="false"> Contabilidad

					</a>

						<ul class="dropdown-menu"
							aria-labelledby="dropdownMenuClickableInside">

							<li><a href="/intranet/facturas/facturas"
								class="dropdown-item icon solid fa-file-invoice-dollar">

									Facturas</a></li>

							<li class="dropdown"><a
								class="dropdown-item dropdown-toggle icon solid fa-circle-euro"
								id="defaultDropdown" data-bs-toggle="dropdown"
								data-bs-auto-close="true" aria-expanded="false">Ingresos</a>

								<ul class="dropdown-menu" aria-labelledby="defaultDropdown">

									<li><a href="/intranet/ingresos/ingresos"
										class="dropdown-item dropdown icon solid fa-eye">Ver

											ingresos</a></li>

								</ul></li>

							<li class="dropdown"><a
								class="dropdown-item dropdown-toggle icon solid fa-chart-line-down "
								id="defaultDropdown" data-bs-toggle="dropdown"
								data-bs-auto-close="true" aria-expanded="false">Gastos</a>

								<ul class="dropdown-menu" aria-labelledby="defaultDropdown">

									<li><a href="/intranet/gastos/gastos"
										class="dropdown-item icon solid fa-eye">Ver gastos</a></li>

								</ul>
							<li class="dropdown"><a
								class="dropdown-item dropdown-toggle icon solid fa-tags "
								id="defaultDropdown" data-bs-toggle="dropdown"
								data-bs-auto-close="true" aria-expanded="false">Tarifas</a>

								<ul class="dropdown-menu" aria-labelledby="defaultDropdown">

									<li><a href="/intranet/tarifas/tarifas"
										class="dropdown-item icon solid fa-eye">Ver tarifas</a></li>

								</ul></li>

						</ul></li>

					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle btn-dark icon solid fa-gavel text-white icon solid fa-gavel"
						href="#" id="navbarDropdownEmpleados" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">Consentimientos</a>

						<ul class="dropdown-menu"
							aria-labelledby="navbarDropdownEmpleados">

							<li><a href="/intranet/consentimientos/consentimientoD"
								class="dropdown-item">Protección datos</a></li>

							<li><a href="/intranet/consentimientos/consentimientoP"
								class="dropdown-item">Punción seca</a></li>

						</ul></li>

					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle btn-dark text-white icon solid fa-chart-simple"
						href="#" id="navbarDropdownEmpleados" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">Estadísticas</a>

						<ul class="dropdown-menu"
							aria-labelledby="navbarDropdownEmpleados">

							<li><a href="/intranet/estadisticas/diasTrabajados"
								class="dropdown-item">Días trabajados</a></li>

							<li><a href="/intranet/estadisticas/distribucionSesiones"
								class="dropdown-item">Distribución sesiones</a></li>

							<li><a href="/intranet/estadisticas/divisionPacientes"
								class="dropdown-item">División pacientes</a></li>

							<li><a href="/intranet/estadisticas/gastosTotales"
								class="dropdown-item">Gastos totales</a></li>

							<li><a href="/intranet/estadisticas/ingresosTotales"
								class="dropdown-item">Ingresos totales</a></li>

							<li><a href="/intranet/estadisticas/metodologiaPago"
								class="dropdown-item">Metodología de pago</a></li>

							<li><a href="/intranet/estadisticas/numeroPacientes"
								class="dropdown-item">Número pacientes</a></li>

							<li><a href="/intranet/estadisticas/preciosSesiones"
								class="dropdown-item">Precio sesiones</a></li>

							<li><a href="/intranet/estadisticas/procedenciaPacientes"
								class="dropdown-item">Procedencia pacientes</a></li>

						</ul></li>

				</ul>

			</nav>

		</div>

	</div>

	<br>

	<br>

	<!-- offcanvas -->

	<main class="mt-5 pt-3">

		<br>

		<div class="row">

			<div class="col-md-3 mb-3">

				<div class="card bg-success text-white h-100"
					onclick="mostrarCampos('lib')"
					style="cursor: pointer; background-color: #007bff; border: 1px solid #007bff;">

					<div class="card-body py-5">Citas libres</div>

				</div>

			</div>

			<div class="col-md-3 mb-3">

				<div class="card bg-info text-white h-100"
					onclick="mostrarCampos('ocu')"
					style="cursor: pointer; background-color: #007bff; border: 1px solid #007bff;">

					<div class="card-body py-5">Todas las citas</div>

				</div>

			</div>

		</div>

		<div class="alert alert-primary" id="msg" style="display: none;"
			role="alert"></div>

		<br>

		<div id="calendario-container1" style="display: block;">

			<div id="calendario"></div>

		</div>

		<div id="calendario-container" style="display: none;">

			<div id="leyenda">

				<div class="leyenda-item">

					<span class="leyenda-color" style="background-color: #FFFF00;"></span>

					<span class="leyenda-texto">Pendiente-Confirmar</span>

				</div>

				<div class="leyenda-item">

					<span class="leyenda-color" style="background-color: #000000;"></span>

					<span class="leyenda-texto">Reservada</span>

				</div>

				<div class="leyenda-item">

					<span class="leyenda-color" style="background-color: #17A2B8;"></span>

					<span class="leyenda-texto">Confirmada / Salvada-Pendiente</span>

				</div>

				<div class="leyenda-item">

					<span class="leyenda-color" style="background-color: #0000FF;"></span>

					<span class="leyenda-texto">Terminada / Salvada</span>

				</div>

				<div class="leyenda-item">

					<span class="leyenda-color" style="background-color: red;"></span>

					<span class="leyenda-texto">Cancelada</span>

				</div>

				<div class="leyenda-item">

					<span class="leyenda-color" style="background-color: green;"></span>

					<span class="leyenda-texto">Libre</span>

				</div>

			</div>

			<br> <br> <br>

			<div id="calendario2"></div>

		</div>

		<!-- Modal -->

		<div class="modal fade" id="modal1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">

			<div class="modal-dialog">

				<div class="modal-content">

					<div class="modal-header">

						<h5 class="modal-title" id="exampleModalLabel"
							style="display: block;">Selecciona paciente para asignar

							cita</h5>

						<h5 class="modal-title" id="borrar" style="display: none;">Esta

							cita solo permite su borrado</h5>

						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>

					</div>

					<div class="modal-body" id="cuerpo" style="display: block;">

						<label><input type="radio" name="pacienteEDIT"
							value="nuevoasg" onclick="mostrarCampos2()">Paciente

							nuevo</label> <label><input type="radio" name="pacienteEDIT"
							value="existenteasg" checked onclick="mostrarCampos2()">Paciente

							existente</label> <input type="hidden" class="form-control" id="idCita">

						<!-- Select para el modal -->

						<div id="campos-fijos" style="display: block;">

							<select class="form-control select2" name="miSelect"
								id="idPaciente">

								<option th:each="pacientes:${lista}" th:value=${pacientes.id}
									th:text="${pacientes.nombre}+' '+${pacientes.apellidos}

+' '+${pacientes.telefono} ?: 'default value'"></option>

							</select>

						</div>

						<div id="campos-nuevos" style="display: none;">

							<div class="form-group">

								<label for="apellido">Nombre</label> <input type="text"
									class="form-control" id="nomPaciente" placeholder="nombre">

							</div>

							<div class="form-group">

								<label for="apellido">Teléfono</label> <input type="number"
									class="form-control" id="telPaciente" placeholder="teléfono">

							</div>

						</div>

						<div class="form-group">

							<label for="direccion">Estado</label> <select name="opciones"
								id="estadoE" class="form-control">

								<option value="pendiente-Confirmar">Pendiente de

									confirmar</option>

								<option value="confirmada">Confirmada</option>

								<option value="reservada">Reservada</option>

							</select>

						</div>

					</div>

					<div class="modal-footer">

						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Cerrar</button>

						<button type="button" class="btn btn-primary" id="asignar">Asignar

							cita</button>

						<button type="button" class="btn btn-danger" id="borrarLibre">Borrar</button>

					</div>

				</div>

			</div>

		</div>

		<!-- Modal -->

		<div class="modal fade" id="terminar"
			aria-labelledby="exampleModalLabel" aria-hidden="true">

			<div class="modal-dialog">

				<div class="modal-content">

					<div class="modal-header">

						<h5 class="modal-title" id="exampleModalLabel">Selecciona

							forma de pago</h5>

						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>

					</div>

					<div class="modal-body">

						<input type="hidden" class="form-control" id="idCitaPago">

						<input type="hidden" class="form-control" id="pacienteT">

						<div class="form-group" id="pagoO" style="display: block;">

							<label for="direccion">Forma de pago</label> <select
								name="opciones" id="formaPagoT" class="form-control"
								style="display: block;">

								<option value="Efectivo,al contado">Efectivo</option>

								<option value="Bizum">Bizum</option>

							</select>

						</div>

						<label for="direccion" style="display: none;" id="label">cita

							pendiente de realizarse</label>

						<div class="form-group" id="tarifaO" style="display: none;">

							<label for="apellido">Tarifa</label> <select class="form-control"
								id="tarifaE">

								<option th:each="tarifas:${tari}" th:value=${tarifas.tipo}
									th:text="${tarifas.tipo}"></option>

							</select>

						</div>

					</div>

					<div class="modal-footer">

						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Cerrar</button>

						<button type="button" class="btn btn-primary" id="terminarT"
							style="display: block;">Terminar</button>

						<button type="button" class="btn btn-warning" id="canceTermi">Cancelar</button>

						<button type="button" class="btn btn-danger" id="borrarTermi">Borrar</button>

					</div>

				</div>

			</div>

		</div>


		<!-- Modal -->

		<div class="modal fade" id="confirmar"
			aria-labelledby="exampleModalLabel" aria-hidden="true">

			<div class="modal-dialog">

				<div class="modal-content">

					<div class="modal-header">

						<h5 class="modal-title" id="exampleModalLabel">Confirmar cita</h5>

						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>

					</div>

					<div class="modal-body">

						<div class="form-group">

							<label for="direccion">Cita pendiente de confirmación</label> <input
								type="hidden" class="form-control" id="idCitaConfi">

						</div>

					</div>

					<div class="modal-footer">

						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Cerrar</button>

						<button type="button" class="btn btn-primary" id="confirmarC">Confirmar</button>

						<button type="button" class="btn btn-warning" id="canceConfi">Cancelar</button>

						<button type="button" class="btn btn-danger" id="borrarConfi">Borrar</button>

					</div>

				</div>

			</div>

		</div>

	</main>

	<!-- Incluir los archivos JS necesarios -->

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/locale/es.min.js"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.1/dist/umd/popper.min.js"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.min.js"></script>

	<script src="/js/calendario/citas.js"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/chart.js@3.5.0/dist/chart.min.js"></script>

</body>

</html>